language: node_js
node_js:
  - '10.16.0'

dist: xenial


services:
  - docker
addons:
  apt:
    packages:
      - docker-ce
      - libsecret-1-dev

script:
  - git fetch --no-tags --prune --depth=1 origin +refs/heads/*:refs/remotes/origin/*
  - yarn install
  - yarn run lerna bootstrap
  - yarn run lerna run test-ci --since origin/main